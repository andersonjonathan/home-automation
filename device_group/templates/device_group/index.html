{% extends 'common/master.html' %}
{% load tags %}
{% block content %}
    {% for d in devices %}
        {% with d.child as p %}
        {% get_verbose_field_name p as verbose_name %}
        {% if verbose_name in plugs %}
        <div class="desktop panel panel-default hidden-xs">
            <div class="panel-body">
                <div class="btn-group btn-group-justified btn-group-lg" role="group">
                <span class="btn inline">{{ p.name }}</span>
                    {% for button in p.buttons.all %}
                    <a href="javascript:void(0)" class="btn {% if button.active %}{{ button.color }} active {% else %}btn-default{% endif %}" role="button"
                       onclick="send_command(this, '{{ button.color }}', '{% url 'switch' p.pk button.pk %}')">{{ button.name|safe }}</a>
                    {% endfor %}
                    {% if p.schedule_set.all %}
                    <a href="javascript:void(0)" class="btn {% if p.schedule_set.all.0.active %}btn-primary active {% else %}btn-default{% endif %}" role="button"
                        onclick="send_command(this, 'btn-primary', '{% url 'switch' p.pk 'auto' %}')">AUTO</a>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="mobile panel panel-default visible-xs-block">
            <div class="panel-heading"><h3 class="panel-title">{{ p.name }}</h3></div>
            <div class="panel-body">
                <div class="btn-group btn-group-lg" role="group">
                    {% for button in p.buttons.all %}
                    <a href="javascript:void(0)" class="btn {% if button.active %}{{ button.color }} active {% else %}btn-default{% endif %}" role="button"
                       onclick="send_command(this, '{{ button.color }}', '{% url 'switch' p.pk button.pk %}')">{{ button.name|safe }}</a>
                    {% endfor %}
                    {% if p.schedule_set.all %}
                    <a href="javascript:void(0)" class="btn {% if p.schedule_set.all.0.active %}btn-primary active {% else %}btn-default{% endif %}" role="button"
                        onclick="send_command(this, 'btn-primary', '{% url 'switch' p.pk 'auto' %}')">AUTO</a>
                    {% endif %}
                </div>
            </div>
        </div>
        {% else %}
        <div class="panel panel-default">
            <div class="panel-heading"><h3 class="panel-title">{{ p.name }}</h3></div>
            <div class="panel-body">

                {% for button_row in p.child.button_grid %}
                    <div class="row">
                    <div class="col-sm-1"></div>
                    <div class="col-sm-10">
                    <div class="btn-group  btn-group-justified btn-group-lg" role="group">
                        {% for button in button_row %}
                <a href="javascript:void(0)" class="btn {{ button.color }}" role="button"
                   onclick="send_command(false, '', '{% url 'switch' p.pk button.pk %}')">{{ button.name|safe }}</a>
                            {% endfor %}
                    </div>
                    </div>
                    <div class="col-sm-1"></div>
                    </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}
        {% endwith %}
    {% endfor %}
{% endblock %}
